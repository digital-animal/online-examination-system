-- DEPARTMENT
-- DROP TABLE DEPARTMENT;

CREATE TABLE DEPARTMENT
(
    DEPARTMENT_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    DEPARTMENT_CODE VARCHAR2(32) NOT NULL,
    DEPARTMENT_NAME VARCHAR2(128) NOT NULL,
    CONSTRAINT DEPT_PK PRIMARY KEY(DEPARTMENT_ID)
);

ALTER TABLE DEPARTMENT
MODIFY DEPARTMENT_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY;

INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('CSE', 'Computer Science and Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('EEE', 'Electrical and Electronics Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('ME', 'Mechanical Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('CE', 'Civil Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('IPE', 'Industrial Production Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('NAME', 'Naval Architecture and Marine Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('MME', 'Materials and Metallurgical Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('BME', 'Biomedical Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('URP', 'Urban and Regional Planning Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('WRE', 'Water Resource Engineering');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('Arch', 'Architecture');
INSERT INTO DEPARTMENT(DEPARTMENT_CODE, DEPARTMENT_NAME) VALUES ('ChE', 'Chemical Engineering');

SELECT * FROM DEPARTMENT;

COMMIT;

-- ===============================================================================================================


-- COURSE
-- DROP TABLE COURSE;

CREATE TABLE COURSE
(
    COURSE_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH 101,
    COURSE_CODE VARCHAR2(32) NOT NULL,
    COURSE_NAME VARCHAR2(128) NOT NULL,
    DEPARTMENT_ID NUMBER,
    CONSTRAINT COURSE_PK PRIMARY KEY (COURSE_ID),
    CONSTRAINT COURSE_DEPT_ID_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT (DEPARTMENT_ID) ON DELETE CASCADE
);

-- ALTER TABLE COURSE
-- MODIFY CONSTRAINT COURSE_DEPT_ID_FK
--     FOREIGN KEY (DEPARTMENT_ID)
--     REFERENCES DEPARTMENT (DEPARTMENT_ID)
--     ON DELETE CASCADE;

INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (107, 'CSE107', 'Object Oriented Programming Language', 1);
INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (205, 'CSE205', 'Digital Logic Design', 1);
INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (215, 'CSE215', 'Database', 1);
INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (207, 'CSE207', 'Data Structures and Algorithms II', 1);
INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (315, 'CSE315', 'Microprocessor and Microcontroller', 1);
INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (321, 'CSE321', 'Computer Networks', 1);
INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (313, 'CSE313', 'Operating System', 1);
INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (317, 'CSE317', 'Artificial Intelligence', 1);
INSERT INTO COURSE (COURSE_ID, COURSE_CODE, COURSE_NAME, DEPARTMENT_ID) VALUES (433, 'CSE433', 'Digital Image Processing', 1);

SELECT * FROM COURSE;

COMMIT;

-- ===============================================================================================================

-- STUDENT
DROP TABLE STUDENT;

CREATE TABLE STUDENT
(
    STUDENT_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    FIRST_NAME VARCHAR2(128) NOT NULL,
    LAST_NAME VARCHAR2(128) NOT NULL,
    EMAIL VARCHAR2(128) NOT NULL,
    DEPARTMENT_ID NUMBER,
    CONSTRAINT STD_PK PRIMARY KEY(STUDENT_ID),
--     CONSTRAINT STD_DEPT_ID_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT (DEPARTMENT_ID) ON DELETE CASCADE,
--     CONSTRAINT STD_APP_USER_ID_FK FOREIGN KEY (STUDENT_ID) REFERENCES AUTH_USER (ID) DEFERRABLE INITIALLY DEFERRED
		CONSTRAINT STD_DEPT_ID_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT (DEPARTMENT_ID) ON DELETE CASCADE
);

INSERT INTO STUDENT (FIRST_NAME, LAST_NAME, EMAIL, DEPARTMENT_ID) VALUES ('Zaki', 'Tahmeed', 'zaki.thameed@email.com', 1);
INSERT INTO STUDENT (FIRST_NAME, LAST_NAME, EMAIL, DEPARTMENT_ID) VALUES ('Zahidul', 'Islam', 'zahid.jewel@email.com', 1);
INSERT INTO STUDENT (FIRST_NAME, LAST_NAME, EMAIL, DEPARTMENT_ID) VALUES ('Tonmoy', 'Hasan', 'tonmoy.hasan@email.com', 1);

SELECT * FROM STUDENT;

COMMIT;
ROLLBACK;

-- ===============================================================================================================

-- -- EXAMINER Table
-- DROP TABLE EXAMINER;

CREATE TABLE EXAMINER
(
    EXAMINER_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    FIRST_NAME VARCHAR2(128) NOT NULL,
    LAST_NAME VARCHAR2(128) NOT NULL,
    EMAIL VARCHAR2(128) NOT NULL,
    DEPARTMENT_ID NUMBER,
    CONSTRAINT EXAMINER_PK PRIMARY KEY(EXAMINER_ID),
--     CONSTRAINT EX_DEPT_ID_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT (DEPARTMENT_ID) ON DELETE CASCADE,
--     CONSTRAINT EXAMINER_APP_USER_ID_FK FOREIGN KEY (EXAMINER_ID) REFERENCES AUTH_USER (ID) DEFERRABLE INITIALLY DEFERRED
		CONSTRAINT EX_DEPT_ID_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT (DEPARTMENT_ID) ON DELETE CASCADE
);

INSERT INTO EXAMINER (FIRST_NAME, LAST_NAME, EMAIL, DEPARTMENT_ID) VALUES ('Abul', 'Hasan', 'abul.hasan@email.com', 1);
INSERT INTO EXAMINER (FIRST_NAME, LAST_NAME, EMAIL, DEPARTMENT_ID) VALUES ('Sadman', 'Sakib', 'sadman.sakib@email.com', 1);
INSERT INTO EXAMINER (FIRST_NAME, LAST_NAME, EMAIL, DEPARTMENT_ID) VALUES ('Abdul', 'Bari', 'abdul.bari@email.com', 1);

SELECT * FROM EXAMINER;

COMMIT;

-- ===============================================================================================================

-- QUESTION Table

DROP TABLE QUESTION;

CREATE TABLE QUESTION
(
    QUESTION_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    QUESTION_TEXT VARCHAR2(1024) NOT NULL,
    COURSE_ID NUMBER NOT NULL,
    EXAMINER_ID NUMBER NOT NULL,
    CONSTRAINT QUESTION_PK PRIMARY KEY (QUESTION_ID),
    CONSTRAINT QUESTION_COURSE_FK FOREIGN KEY (COURSE_ID) REFERENCES COURSE (COURSE_ID) ON DELETE CASCADE,
    CONSTRAINT QUESTION_EXAMINER_FK FOREIGN KEY (EXAMINER_ID) REFERENCES EXAMINER (EXAMINER_ID) ON DELETE CASCADE
);

INSERT INTO QUESTION (QUESTION_TEXT, COURSE_ID, EXAMINER_ID) VALUES ('Which data structure is used in hierarchical data model?', 207, 103);
INSERT INTO QUESTION (QUESTION_TEXT, COURSE_ID, EXAMINER_ID) VALUES ('Which data structure has fixed size?', 207, 103);
INSERT INTO QUESTION (QUESTION_TEXT, COURSE_ID, EXAMINER_ID) VALUES ('Which data structure follows LIFO structure?', 207, 103);
INSERT INTO QUESTION (QUESTION_TEXT, COURSE_ID, EXAMINER_ID) VALUES ('Which one is linear data structure?', 207, 103);
INSERT INTO QUESTION (QUESTION_TEXT, COURSE_ID, EXAMINER_ID) VALUES ('Which data structure can store related information of different data type?', 207, 103);

SELECT * FROM QUESTION;

COMMIT;

-- ===============================================================================================================
-- CHOICE TABLE

-- DROP TABLE CHOICE;

CREATE TABLE CHOICE
(
    CHOICE_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    CHOICE_TEXT VARCHAR2(256) NOT NULL,
    IS_CORRECT NUMBER NOT NULL,
    QUESTION_ID NUMBER,
    CONSTRAINT CHOICE_PK PRIMARY KEY (CHOICE_ID),
    CONSTRAINT CHOICE_QUESTION_FK FOREIGN KEY (QUESTION_ID) REFERENCES QUESTION (QUESTION_ID) ON DELETE CASCADE
);

ALTER TABLE CHOICE
MODIFY IS_CORRECT DEFAULT 0;

SELECT * FROM CHOICE;

COMMIT;
